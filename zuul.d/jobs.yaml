---
- job:
    name: build-otc-api-ref
    parent: otc-tox-docs
    description: |
      Build api-ref document. This is only run on master branch of a project.
    timeout: 1800
    vars:
      sphinx_build_dir: api-ref/build
      tox_envlist: api-ref
      tox_skip_pdf: true
    # We only publish the master (main) branch, so no need to run
    # for changes on other branches.
    branches:
      - master
      - main

- job:
    name: otc-zuul-jobs-linters
    parent: tox
    description: |
      This job runs against base-jobs, project-config, otc-zuul-jobs
      and zuul-jobs so we can properly lint our ansible playbooks / roles.
    required-projects:
      - opentelekomcloud-infra/base-jobs
      - opentelekomcloud-infra/otc-zuul-jobs
      - opentelekomcloud-infra/zuul-project-config
      - opentelekomcloud-infra/system-config
      - zuul/zuul-jobs
    nodeset: fedora-pod
    vars:
      tox_envlist: linters
      tox_environment:
        ANSIBLE_ROLES_PATH: ~/src/github.com/opentelekomcloud-infra/base-jobs/roles:~/src/opendev.org/zuul/zuul-jobs/roles:~/src/github.com/opentelekomcloud-infra/otc-zuul-jobs/roles:~/src/github.com/opentelekomcloud-infra/zuul-project-config/roles:~/src/github.com/opentelekomcloud-infra/system-config/roles
